<div class="page-container">
  <div class="sidebar">
    <h3>Agente Cliente</h3>
    <div class="chat-messages" id="chat-messages">
      <div *ngFor="let msg of messages" [ngClass]="msg.type === 'user' ? 'user-message' : 'agent-message'">{{ msg.text }}</div>
    </div>

    <div class="chat-input">
      <input [(ngModel)]="userQuery" name="query" placeholder="Escribe tu mensaje..." [disabled]="loading" />
      <button id="send-message" (click)="sendMessage()" title="Enviar mensaje" class="btn-send" [disabled]="loading">{{ loading ? 'Enviando...' : '‚ñ∂ Enviar' }}</button>
    </div>
  </div>

  <div class="container main-content">
    <div *ngIf="loading" class="loading">‚è≥ Consultando agente...</div>
    <div *ngIf="error && !loading" class="error">‚ùå {{ error }}</div>

    <div *ngIf="products.length; else noProducts">
      <div class="section-title">Productos encontrados ({{ products.length }})</div>
      <div class="productos-grid">
        <div *ngFor="let product of products" class="producto">
          <div class="producto-image">
            <img [src]="product.imagen_url" alt="{{ product.nombre }}" class="w-full h-full object-cover" *ngIf="product.imagen_url" />
          </div>
          <h3>{{ product.nombre || 'Sin nombre' }}</h3>
          <div class="descripcion">{{ product.descripcion || 'Sin descripci√≥n' }}</div>
          <div class="precio">{{ product.precio ? ('$' + product.precio) : 'N/A' }}</div>
          <button>Ver</button>
        </div>
      </div>
    </div>

    <ng-template #noProducts>
      <div *ngIf="!loading" class="no-data">üì≠ Realiza una b√∫squeda para ver productos</div>
    </ng-template>
  </div>
</div>
